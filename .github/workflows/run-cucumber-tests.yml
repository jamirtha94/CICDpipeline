

    name: Run Selenium Cucumber Tests

    on:
      push:
        branches: [ main ]
      pull_request:
        branches: [ main ]

    jobs:
      test:
        runs-on: ubuntu-latest

        steps:
        - name: Checkout repository
          uses: actions/checkout@v3

        - name: Set up Java
          uses: actions/setup-java@v3
          with:
            distribution: 'temurin'
            java-version: '17'

        - name: Install Chrome and ChromeDriver
          run: |
            sudo apt update
            sudo apt install -y wget unzip xvfb
            wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
            sudo apt install -y ./google-chrome-stable_current_amd64.deb
            CHROME_VERSION=$(google-chrome --version | grep -oP '\d+\.\d+\.\d+\.\d+')
            wget -q https://chromedriver.storage.googleapis.com/${CHROME_VERSION%%.*}/chromedriver_linux64.zip
            unzip chromedriver_linux64.zip
            sudo mv chromedriver /usr/local/bin/chromedriver
            chmod +x /usr/local/bin/chromedriver

        - name: Run Selenium tests
          run: |
            Xvfb :99 &
            export DISPLAY=:99
             mvn test -DsuiteXmlFile=testng.xml
